function getParamKey(e){return{"型号":"model","屏幕尺寸":"screenSize","分辨率":"resolution","价格":"price","描述":"description","输入点数":"inputPoints","输出点数":"outputPoints","CPU型号":"cpuModel","内存容量":"memory","本地扩展模块数":"localExpansionModules","程序存储空间":"programStorage","数据存储空间":"dataStorage","掉电数据保存大小":"powerFailureDataSize","运动控制轴数":"motionControlAxes","高速I/O功能":"highSpeedIO","软元件特性":"softElementFeatures","本体输出类型":"mainOutputType",EtherCAT:"ethercat","CANopen/CANlink":"canOpenCanlink",ModbusTCP:"modbusTCP","Modbus（串口）":"modbusSerial","EtherNet/IP":"etherNetIP","额定功率":"ratedPower","额定电压":"ratedVoltage","额定转矩":"ratedTorque","功率范围":"powerRange","电压等级":"voltageLevel"}[e]||e}function displayResults(e,t,l,c,a=[]){"undefined"!=typeof window&&(window.displayResults=displayResults);var n=document.getElementById(e);if(n)if(n.innerHTML="","function"==typeof window.setTopBarTitle&&window.setTopBarTitle(`${c}筛选结果 (${t.length})`),0===t.length)n.innerHTML=`
            <div class="no-results">
                <p>没有找到匹配的产品</p>
                <button id="resetFilters" class="reset-btn">重置筛选条件</button>
            </div>
        `;else{let s=document.createElement("div");s.className="results-container",t.forEach((n,t)=>{try{var o=document.createElement("div"),i=(o.className="result-card",getParamKey("价格")),r=void 0!==n.price?n.price:n[i];let e="",a=(null!=r&&""!==r&&(e="number"==typeof r?`<span class="price-badge">¥${r.toLocaleString()}</span>`:`<span class="price-badge">${r}</span>`),`
                <div class="result-card-content">
                    <div class="result-card-header">
                        <h3 class="result-card-title">${n.model||n.id||"产品 "+(t+1)}</h3>
                        ${e}
                    </div>
                    <div class="result-card-info">
            `);l.filter(e=>"string"==typeof e&&""!=e.trim()&&"价格"!==e).forEach(e=>{var t=getParamKey(e),t=void 0!==n[t]?n[t]:void 0!==n[e]?n[e]:"-";a+=`
                    <div class="result-info-item">
                        <strong>${e}:</strong>
                        <span>${t}</span>
                    </div>
                `}),a+=`
                    </div>
                </div>
                <div class="result-card-actions">
                    <a href="https://www.inovance.com/portal/allResult?key=${n.model||""}" 
                       class="download-btn" 
                       target="_blank" 
                       rel="noopener noreferrer">资料和图纸下载</a>
                    <button class="compare-btn"
                        data-product='${JSON.stringify(n).replace(/'/g,"&apos;")}'
                        data-type="${c}">对比</button>
                    <button class="add-to-bom-btn"
                        data-id="${n.id||n.model||""}"
                        data-model="${n.model||""}"
                        data-category="${c}"
                        data-name="${n.name||n.model||""}"
                        data-price="${void 0===r?"":"number"==typeof r?r:(""+r).replace(/[^0-9.]/g,"")}"
                        data-description="${n.description||n["描述"]||""}">
                        + 添加到BOM
                    </button>
                </div>
            `,o.innerHTML=a,s.appendChild(o)}catch(e){window.errorHandler&&errorHandler.handleError(e,"common.js",0,0,`创建产品卡片时出错[${t}]`)}}),n.appendChild(s),Array.isArray(a)&&0<a.length&&((t=document.createElement("div")).className="filters-summary",t.innerHTML=a.map(e=>`<span class="filter-chip">${e.label}: ${e.value}</span>`).join(""),n.appendChild(t))}else window.errorHandler&&errorHandler.handleError(Error("结果容器未找到"),"common.js",0,0,`结果容器#${e}未找到`)}function LocalStorageManager(){this.reservedKeys=["petSettings","theme"],this.expirationTime=2592e6,this.isAvailableCache=null}document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("theme-toggle");if(e){var t=e.querySelector("i"),a="dark"===localStorageManager.getItem("theme");if(!a&&window.matchMedia)try{a=window.matchMedia("(prefers-color-scheme: dark)").matches}catch(e){}a&&(document.body.classList.add("dark-mode"),t.classList.remove("fa-moon"),t.classList.add("fa-sun"),document.body.style.transition="background-color 0.3s ease, color 0.3s ease"),e.addEventListener("click",function(){var e;document.body.style.transition="background-color 0.3s ease, color 0.3s ease",document.body.classList.toggle("dark-mode"),document.body.classList.contains("dark-mode")?(localStorageManager.setItem("theme","dark"),t.classList.remove("fa-moon"),t.classList.add("fa-sun")):(localStorageManager.setItem("theme","light"),t.classList.remove("fa-sun"),t.classList.add("fa-moon")),"function"==typeof CustomEvent?e=new CustomEvent("themeChange",{detail:{theme:document.body.classList.contains("dark-mode")?"dark":"light"}}):(e=document.createEvent("CustomEvent")).initCustomEvent("themeChange",!0,!0,{theme:document.body.classList.contains("dark-mode")?"dark":"light"}),document.dispatchEvent(e)})}for(var n=document.querySelectorAll(".sidebar-nav .nav-item"),o=0;o<n.length;o++){var i=n[o];i.querySelector(".dropdown-icon")||i.addEventListener("click",function(e){e.preventDefault();for(var t=document.querySelectorAll(".nav-item"),a=0;a<t.length;a++)t[a].classList.remove("active");this.classList.add("active"),"main"===this.getAttribute("data-page")&&window.pageRouter&&window.pageRouter.backToMain();e=this.getAttribute("data-type");e&&window.pageRouter&&window.pageRouter.openFilterModal(e)})}var r="",s="";if(window.URLSearchParams)a=new URLSearchParams(window.location.search),r=a.get("type"),s=a.get("filters");else for(var l=window.location.search.substring(1).split("&"),c=0;c<l.length;c++){var d=l[c].split("=");"type"===decodeURIComponent(d[0])?r=decodeURIComponent(d[1]):"filters"===decodeURIComponent(d[0])&&(s=decodeURIComponent(d[1]))}if(r&&s&&window.pageRouter){e={hmi:"hmiResult",plc:"plcResult",servo:"servoResult",inverter:"inverterResult",io:"ioResult"}[r.toLowerCase()];if(e){window.pageRouter.showPage(e);try{var u,g=JSON.parse(decodeURIComponent(s));"function"==typeof CustomEvent?u=new CustomEvent("showFilterResults",{detail:{productType:r,filterData:g}}):(u=document.createEvent("CustomEvent")).initCustomEvent("showFilterResults",!0,!0,{productType:r,filterData:g}),document.dispatchEvent(u)}catch(e){}}}document.addEventListener("change",function(e){e=e.target;if("checkbox"===e.type&&e.parentElement.classList.contains("checkbox-option")&&(t=e.parentElement,e.checked?t.classList.add("checked"):t.classList.remove("checked")),"radio"===e.type&&e.parentElement.classList.contains("radio-option")){for(var t=e.name,a=document.querySelectorAll('input[type="radio"][name="'+t+'"]'),n=0;n<a.length;n++)a[n].parentElement.classList.remove("checked");e.parentElement.classList.add("checked")}}),document.addEventListener("click",function(e){e=e.target;if(e.classList.contains("filter-option")){for(var t=e.parentElement.querySelectorAll(".filter-option"),a=0;a<t.length;a++)t[a].classList.remove("selected");e.classList.add("selected")}})}),window.setTopBarTitle=function(e){var t=document.querySelector(".page-title");t&&(t.textContent=e)},window.setTopBarBackVisible=function(e){var t=document.getElementById("topbarBackBtn");t&&(t.style.display=e?"inline-block":"none")},document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("topbarBackBtn");e&&e.addEventListener("click",function(){window.pageRouter&&window.pageRouter.backToMain()})}),window.productTypes=window.productTypes||{},LocalStorageManager.prototype.isAvailable=function(){if(null!==this.isAvailableCache)return this.isAvailableCache;try{var e="__localStorage_test__";return localStorage.setItem(e,e),localStorage.removeItem(e),this.isAvailableCache=!0}catch(e){return this.isAvailableCache=!1}},LocalStorageManager.prototype.cleanup=function(){if(this.isAvailable())try{for(var e=Date.now(),t=Object.keys(localStorage),a=0;a<t.length;a++){var n=t[a];if(!~this.reservedKeys.indexOf(n))try{var o=JSON.parse(localStorage[n]);o.expires&&e>o.expires&&localStorage.removeItem(n)}catch(e){continue}}}catch(e){}},LocalStorageManager.prototype.setItem=function(t,a,n){if(void 0===n&&(n=null),!this.isAvailable())return!1;try{var e={value:a,timestamp:Date.now(),expires:n?Date.now()+n:null};return localStorage.setItem(t,JSON.stringify(e)),!0}catch(e){this.cleanup();try{var o={value:a,timestamp:Date.now(),expires:n?Date.now()+n:null};return localStorage.setItem(t,JSON.stringify(o)),!0}catch(e){return!1}}},LocalStorageManager.prototype.getItem=function(e){if(!this.isAvailable())return null;try{var t=localStorage.getItem(e);if(!t)return null;try{var a=JSON.parse(t);return a&&"object"==typeof a&&"value"in a?a.expires&&Date.now()>a.expires?(localStorage.removeItem(e),null):a.value:a}catch(e){return t}}catch(e){return null}},LocalStorageManager.prototype.removeItem=function(e){if(this.isAvailable())try{localStorage.removeItem(e)}catch(e){}},LocalStorageManager.prototype.clear=function(){if(this.isAvailable())try{for(var e={},t=0;t<this.reservedKeys.length;t++){var a=this.reservedKeys[t],n=this.getItem(a);null!==n&&(e[a]=n)}for(a in localStorage.clear(),e)e.hasOwnProperty(a)&&this.setItem(a,e[a])}catch(e){}},window.localStorageManager=new LocalStorageManager;var SettingsManager={settings:{showPetByDefault:!0,sizeRatio:100},initSettings:function(){var e=window.localStorageManager.getItem("petSettings");if(e)try{for(var t in e)e.hasOwnProperty(t)&&(this.settings[t]=e[t])}catch(e){this.settings={showPetByDefault:!0,sizeRatio:100}}window.localStorageManager.cleanup()},saveSettings:function(){try{window.localStorageManager.setItem("petSettings",this.settings)}catch(e){}},showSettingsModal:function(){var e=document.getElementById("settingsModal");document.getElementById("pet-default-toggle").checked=this.settings.showPetByDefault,e.style.display="block"},hideSettingsModal:function(){document.getElementById("settingsModal").style.display="none"},bindSettingsEvents:function(){var e=document.getElementById("settings-toggle"),t=this,e=(e&&e.addEventListener("click",function(){t.showSettingsModal()}),document.getElementById("settingsClose")),a=document.getElementById("settingsModal"),e=(e&&e.addEventListener("click",function(){t.hideSettingsModal()}),window.addEventListener("click",function(e){e.target===a&&t.hideSettingsModal()}),document.getElementById("settingsSave"));e&&e.addEventListener("click",function(){var e=document.getElementById("pet-default-toggle"),e=(t.settings.showPetByDefault=e.checked,t.saveSettings(),document.getElementById("pet-container"));e&&(e.style.display=t.settings.showPetByDefault?"block":"none"),t.hideSettingsModal()}),window.localStorageManager.cleanup()},updateSetting:function(e,t){this.settings[e]=t,this.saveSettings()},getSetting:function(e){return this.settings[e]}};window.SettingsManager=SettingsManager,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){SettingsManager.initSettings(),SettingsManager.bindSettingsEvents()}):(SettingsManager.initSettings(),SettingsManager.bindSettingsEvents());